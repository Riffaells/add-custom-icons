# Добавить пользовательские иконки

Плагин для Obsidian, который загружает пользовательские SVG иконкики `icons` и автоматически перезапускает выбранные плагины. `icons` может быть как в `.obsidian`, так и в корне плагина.

## Структура проекта

```
├── main.ts                    # Главный файл плагина
├── manifest.json              # Манифест плагина
├── icons/                     # Папка с SVG иконками
│   └── example-icon.svg       # Пример иконки
├── src/
│   ├── lang/                  # Встроенные переводы
│   │   ├── en.ts             # Английские переводы
│   │   ├── ru.ts             # Русские переводы
│   │   └── index.ts          # Экспорт переводов
│   ├── types/
│   │   └── index.ts          # TypeScript типы и интерфейсы
│   ├── utils/
│   │   ├── constants.ts      # Константы и настройки по умолчанию
│   │   └── helpers.ts        # Вспомогательные функции
│   ├── services/
│   │   ├── IconLoader.ts     # Сервис загрузки иконок
│   │   ├── PluginManager.ts  # Сервис управления плагинами
│   │   └── I18nService.ts    # Сервис локализации
│   └── ui/
│       └── SettingsTab.ts    # Интерфейс настроек
└── autobuild.py              # Скрипт синхронизации для разработки
```

## Возможности

- **Загрузка SVG иконок**: Автоматически сканирует папку `icons` и загружает все SVG файлы
- **Кэширование**: Использует кэш для быстрой загрузки неизмененных иконок
- **Нормализация SVG**: Автоматически адаптирует иконки под тему Obsidian
- **Автоматический перезапуск**: Может перезапускать выбранные плагины или весь Obsidian
- **Рекурсивное сканирование**: Поддерживает подпапки в папке icons
- **Пакетная обработка**: Обрабатывает иконки пакетами для лучшей производительности
- **Многоязычность**: Поддержка русского и английского языков с автоопределением
- **Современный UI**: Компактный интерфейс настроек с удобным управлением плагинами
- **Встроенные переводы**: Все переводы компилируются в код плагина

## Использование

1. Поместите SVG файлы в папку `icons` в корне плагина или в папку .obsidian
2. Плагин автоматически загрузит иконки при запуске
3. Используйте команду "Перезагрузить пользовательские иконки" для ручной перезагрузки
4. Настройте автоматический перезапуск в настройках плагина

## Настройки

- **Включить автоперезапуск**: Автоматически перезапускать плагины после загрузки иконок
- **Цель перезапуска**: Что перезапускать (выбранные плагины, весь Obsidian или ничего)
- **Выбор плагинов**: Удобный интерфейс для добавления/удаления плагинов из списка перезапуска



## Разработка

```bash
# Установка зависимостей
npm install

# Сборка для разработки
npm run dev

# Сборка для продакшена
npm run build
```

### Автоматическая сборка и синхронизация

Для удобной разработки включен Python скрипт автоматической сборки:

```bash
# Установка зависимостей Python
pip install watchdog rich

# Запуск автосборки
python autobuild.py --vault "путь/к/хранилищу/obsidian"
```

Скрипт автоматически отслеживает изменения в `main.js`, `styles.css` и `manifest.json`, копируя их в папку плагина в Obsidian.

## Архитектура

Плагин разделен на логические модули:

- **main.ts**: Основной класс плагина, координирует работу всех сервисов
- **IconLoader**: Отвечает за загрузку, кэширование и обработку иконок
- **PluginManager**: Управляет перезапуском плагинов и Obsidian
- **SettingsTab**: Пользовательский интерфейс настроек
- **I18nService**: Сервис локализации со встроенными переводами
- **types**: Общие TypeScript типы
- **utils**: Константы и вспомогательные функции

## Лицензия

MIT License - см. файл LICENSE для подробностей.
